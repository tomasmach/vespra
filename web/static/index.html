<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mnemon-bot Dashboard</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="layout">
    <aside class="sidebar">
      <div class="sidebar-logo">
        <span class="logo-icon">ðŸ§ </span>
        <span class="logo-text">Mnemon</span>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-item active" id="nav-config" onclick="showView('config')">
          <span class="nav-icon">âš™</span> Config
        </button>
        <button class="nav-item" id="nav-memories" onclick="showView('memories')">
          <span class="nav-icon">ðŸ—„</span> Memories
        </button>
        <button class="nav-item" id="nav-monitor" onclick="showView('monitor')">
          <span class="nav-icon">ðŸ“¡</span> Monitor
        </button>
      </nav>
      <div class="sidebar-footer">
        <span id="sse-dot" class="sse-dot"></span>
        <span id="sse-label" class="sse-label">Connectingâ€¦</span>
      </div>
    </aside>

    <main class="main-content">
      <!-- Config view -->
      <div id="view-config" class="view">
        <div class="card">
          <div class="card-header">
            <h2>Configuration</h2>
            <button class="btn-primary" onclick="saveConfig()">Save</button>
          </div>
          <textarea id="config-editor" spellcheck="false"></textarea>
          <span id="config-status" class="status-msg"></span>
        </div>
      </div>

      <!-- Memories view -->
      <div id="view-memories" class="view" hidden>
        <div class="card">
          <div class="search-row">
            <input id="mem-server" type="text" placeholder="Server ID (required)">
            <input id="mem-user" type="text" placeholder="User ID (optional)">
            <input id="mem-query" type="text" placeholder="Search (optional)">
            <button class="btn-primary" onclick="loadMemories()">Search</button>
          </div>
          <span id="mem-status" class="status-msg"></span>
        </div>
        <span id="mem-count" class="result-count" hidden></span>
        <div id="mem-grid" class="card-grid"></div>
      </div>

      <!-- Monitor view -->
      <div id="view-monitor" class="view" hidden>
        <div class="monitor-header">
          <span id="agent-count-dot" class="status-dot"></span>
          <span id="monitor-status">Waiting for dataâ€¦</span>
        </div>
        <div id="agent-grid" class="card-grid"></div>
      </div>
    </main>
  </div>

  <!-- Edit modal -->
  <dialog id="edit-modal">
    <div class="modal-content">
      <h3>Edit Memory</h3>
      <textarea id="edit-textarea"></textarea>
      <div class="modal-actions">
        <button class="btn-secondary" onclick="closeEditModal()">Cancel</button>
        <button class="btn-primary" onclick="confirmEdit()">Save</button>
      </div>
    </div>
  </dialog>

  <script src="/static/app.js"></script>
</body>
</html>
